{#
/**
 * Translate plugin for Craft CMS 3.x
 *
 * Translation management plugin for Craft CMS
 *
 * @link      https://enupal.com
 * @copyright Copyright (c) 2018 Enupal
 */
#}

{% extends "_layouts/elementindex" %}
{% set title = "Translate"|t %}
{% set elementType = 'enupal\\translate\\elements\\Translate' %}

{% do view.registerAssetBundle("enupal\\translate\\assetbundles\\TranslateAsset") %}

{% block actionButton %}
    <div class="buttons">
        <form method="post" enctype="multipart/form-data">
            {{ csrfInput() }}
            <input type="hidden" name="action" value="enupal-translate/translate/upload">
            <input type="hidden" name="siteId" value="{{ elementInstance.siteId }}">
            <input type="file" name="translations-upload" style="display: none" />
        </form>
        <div class="btn submit translations-upload-button" data-icon="upload" style="position: relative; overflow: hidden;" role="button">{{ "Upload file"|t }}</div>
    </div>


{% endblock %}

{% block content %}
    <form method="post" id="translate-ajax" accept-charset="utf-8">
        {{ csrfInput() }}
        <input type="hidden" name="action" value="enupal-translate/translate/save">
        <input type="hidden" name="siteId" value="{{ elementInstance.siteId }}">
        
        {{ parent() }}
        
        <div class="buttons hidden">
            <input type="submit" class="btn submit translations-save-button" value="{{ "Save"|t }}"> 
            <a class="btn submit translations-download-button" href="{{ actionUrl('enupal-translate/translate/download', {'siteId': elementInstance.siteId }) }}">{{ "Download"|t }}</a>
        </div>
    </form>
{% endblock %}

{% js %}
    $(document).ready(function() {
    new EnupalTranslate();
    });
{% endjs %}